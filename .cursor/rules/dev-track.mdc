---
description: "dev-track project intelligence — loaded on every interaction for this project"
alwaysApply: true
---

# dev-track — Project Intelligence System

## AFTER EVERY CODE CHANGE — mandatory checklist
Before moving to the next task, do ALL of these:
1. Write a changelog entry to `data/changelog/entries.json`
2. If a backlog item was completed, update its status in `data/backlog/items.json`
3. If a bug was found/fixed, create/update an issue in `data/issues/items.json`
4. If the dev server needs restarting (server-side changes), restart it yourself
This is not optional. Do it inline, not at session end.

## Quick Status (auto-updated at session end)
dev-track | 65% health | Now: AI chat agent (L, in_progress) | 4 sessions, 42 items shipped, 122 points | Open issues: 3 (0 crit, 1 high) | 22 ideas captured

## Last Session Briefing (auto-updated at session end)
Session 4 complete (Feb 7 evening). Built entire AI-in-the-loop foundation: chat-first agent with 25 tools, multi-provider model routing (OpenAI/Anthropic/Google, 58 models auto-discovered), SSE streaming, tool call visualization, persistent sidebar UI. Also: graph layman descriptions (ISS-007 resolved), docs wiki overhaul, model auto-discovery system. Architecture plan created. User profiles built. Business model decided: NOT open source — paid product (local daemon + web platform). v0.1 goal: dogfood on Pillar and Landmark. Next: polish chat, build Settings UI for AI config, start background monitoring.

## Warnings
- AI context drift: coding AI may forget tracking duties during complex tasks (ISS-006). Chat agent partially addresses this but background monitoring still needed (IDEA-014).
- AI chat needs browser testing — API works but full UI flow needs validation.
- Integration plugins (Vercel, Supabase, Sentry, etc.) still untested with real credentials.
- Server crashes on tsx watch reload when port is held (EADDRINUSE). Needs graceful handling.

## System
Project tracking lives in `data/`. Server: http://localhost:24680. UI: http://localhost:24681 (dev).
CLI: `node cli/index.ts <resource> <action> [id] [--flags]`

## File Map
- `data/state.json` — System health ratings
- `data/session/current.json` — Current session plan
- `data/session/log.json` — Session history
- `data/backlog/items.json` — All backlog items (now/next/later)
- `data/changelog/entries.json` — What shipped, when
- `data/actions/registry.json` — Tracked features + health
- `data/issues/items.json` — Bug tracker
- `data/metrics/velocity.json` — Velocity data
- `data/brain/notes.json` — AI observations, suggestions, warnings
- `data/brain/preferences.json` — Learned user preferences
- `data/brain/context-recovery.json` — Detailed session handoff (read for deep context)
- `data/ideas/items.json` — Captured ideas with status tracking
- `data/designs/*.md` — Architecture docs

## How This File Works (for any AI platform)
This file is auto-loaded by your AI tool (Cursor rules, CLAUDE.md, copilot-instructions, etc.).
The Quick Status and Last Session Briefing above are YOUR context — they tell you where things stand without reading any files. They're regenerated automatically at session end.
If you need deeper context, read `data/brain/context-recovery.json` for the full briefing.

## Session Lifecycle
- **Starting**: Read `data/session/current.json` + `data/backlog/items.json` (horizon=now). Present plan.
- **During work**: Update backlog status on completion. Log new discoveries to backlog (horizon=later). Create issues for bugs found.
- **Ending** ("wrap up" / "done for today" / "push for the night"):
  1. Update backlog items, append changelog entries
  2. Write session retro to `session/log.json`
  3. Update `metrics/velocity.json`
  4. Write `brain/context-recovery.json` (detailed handoff for next session)
  5. **Regenerate the Quick Status + Last Session Briefing at the top of THIS file**

## During Work
- Completing a feature → Update backlog status + append changelog entry
- Discovering new work → Add to backlog (horizon=later, estimate size)
- Architecture decision → Create `data/decisions/NNN-title.md`
- Starting work on item with design_doc → Read that specific design doc

## On Request
- "status" / "where are we" → Read `data/state.json`
- "backlog" / "what's next" → Read `data/backlog/items.json`
- "issues" / "bugs" → Read `data/issues/items.json`
- "velocity" / "how are we doing" → Read `data/metrics/velocity.json`
- "changelog" / "what shipped" → Read `data/changelog/entries.json`

## AI Brain — Persistent Memory
You have a persistent memory system. USE IT PROACTIVELY:
- **Write brain notes** when you notice patterns, have suggestions, see warnings, make decisions, learn preferences
- **Capture ideas** from conversation to `data/ideas/items.json` with title, description, pros/cons, open questions
- **Generate context recovery** at session end: briefing, hot_context, warnings, suggestions

## AI Autonomy Permissions
You have FULL permission to manage dev-track proactively:
- Move backlog items between horizons based on work progress
- Create issues when bugs are found, resolve them when fixed
- Write changelog entries for completed work without being asked
- Update system health ratings when features ship or break
- Write brain notes and capture ideas from conversation
- Archive old data when files grow too large
- Regenerate Quick Status + Briefing after any session-ending operation

## Standing Instructions (user preferences — always follow)
These are persistent behavioral instructions from the user. Follow them in every conversation, on every platform.
- When code changes require a server restart, just restart it. Don't tell the user to do it.
- When you learn a new user preference during conversation, add it to this section AND to `data/brain/preferences.json`.
- Bias toward action over asking permission. Do the thing, then tell the user what you did.
- The user likes beautiful, clean UI — prioritize aesthetics alongside function.
- Document as you go. Write changelog entries immediately after completing work, not in batches. Follow dev-track's own rules consistently.

## Rules
- NEVER load all data files at once unless user asks for full review
- Max 3 items in horizon=now (WIP limit). Promote a 4th? Ask which to demote.
- Changelog is append-only. Never rewrite history.
- Sizes: S (<30min), M (1-3h), L (4-8h), XL (multi-session, must be broken down)
- Auto-increment issue IDs from next_id in `issues/items.json`
